<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organizador Mejorado</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  body { 
    font-family: 'Poppins', sans-serif; 
    background-color: #f4f5f7; 
    padding: 20px;
  }
  .card { 
    border-radius: 15px; 
    margin-bottom: 20px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  .task-btn { margin-left: 5px; }
  #notesArea { 
    width: 100%; 
    min-height: 150px; 
    border-radius: 10px; 
    padding: 10px; 
    resize: none; 
  }
  .list-group-item {
    transition: all 0.3s ease;
  }
  .list-group-item:hover {
    transform: scale(1.02);
    background-color: #f8f9fa;
  }
  .badge {
    font-size: 0.75rem;
    margin-left: 5px;
  }
  #progressBar {
    height: 8px;
    background-color: #0d6efd;
    width: 100%;
    transition: width 0.5s;
  }
</style>
</head>
<body>

<div class="container">
  <h1 class="text-center mb-4">Organizador</h1>

  <div class="row">
    <!-- Tareas -->
    <div class="col-md-8">
      <div class="card p-3">
        <h4><i class="bi bi-list-task"></i> Tareas</h4>
        <div class="input-group mb-3">
          <input type="text" id="taskInput" class="form-control" placeholder="Nueva tarea...">
          <input type="date" id="taskDate" class="form-control">
          <button class="btn btn-primary" id="addTaskBtn"><i class="bi bi-plus-circle"></i> Agregar</button>
        </div>
        <div class="row">
          <div class="col">
            <h6>Pendientes <span class="badge bg-warning">To Do</span></h6>
            <ul id="pendingList" class="list-group"></ul>
          </div>
          <div class="col">
            <h6>En progreso <span class="badge bg-info">Doing</span></h6>
            <ul id="progressList" class="list-group"></ul>
          </div>
          <div class="col">
            <h6>Hechas <span class="badge bg-success">Done</span></h6>
            <ul id="doneList" class="list-group"></ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Herramientas -->
    <div class="col-md-4">
      <!-- Pomodoro -->
      <div class="card p-3 mb-3">
        <h4><i class="bi bi-alarm"></i> Pomodoro</h4>
        <p id="timerDisplay" class="fs-3 text-center">25:00</p>
        <div class="progress mb-3">
          <div id="progressBar"></div>
        </div>
        <div class="d-flex justify-content-center gap-2">
          <button class="btn btn-success btn-sm" id="startBtn"><i class="bi bi-play-fill"></i></button>
          <button class="btn btn-warning btn-sm" id="pauseBtn"><i class="bi bi-pause-fill"></i></button>
          <button class="btn btn-danger btn-sm" id="resetBtn"><i class="bi bi-arrow-counterclockwise"></i></button>
        </div>
      </div>

      <!-- Bloc de notas -->
      <div class="card p-3 mb-3">
        <h4><i class="bi bi-journal-text"></i> Bloc de notas</h4>
        <textarea id="notesArea" placeholder="Escribe tus notas aqu√≠..."></textarea>
        <p class="text-end text-muted small mb-0" id="saveStatus">Guardado autom√°ticamente</p>
      </div>

      <!-- Moodboard -->
      <div class="card p-3">
        <h4><i class="bi bi-pin-angle"></i> Moodboard</h4>
        <button class="btn btn-info w-100" onclick="window.open('https://www.pinterest.com','_blank')">Abrir Pinterest</button>
      </div>
    </div>
  </div>
</div>

<script>
// ============================
// FUNCIONES DE TAREAS
// ============================
const addTaskBtn = document.getElementById("addTaskBtn");
addTaskBtn.addEventListener("click", addTask);
window.onload = () => {
  loadTasks();
  document.getElementById("notesArea").value = localStorage.getItem("myNotes") || "";
  updateDisplay();
};

// Crear nueva tarea
function addTask() {
  const taskInput = document.getElementById("taskInput");
  const taskDate = document.getElementById("taskDate");
  const text = taskInput.value.trim();
  if (!text) return;

  const li = createTaskItem(text, taskDate.value);
  document.getElementById("pendingList").appendChild(li);
  taskInput.value = "";
  taskDate.value = "";
  saveTasks();
}

function createTaskItem(text, date) {
  const li = document.createElement("li");
  li.className = "list-group-item d-flex justify-content-between align-items-center";
  li.innerHTML = `
    <span ondblclick="editTask(this)">${text}${date ? " - " + date : ""}</span>
    <div>
      <button class='btn btn-info btn-sm task-btn' onclick="moveTask(this,'progressList')"><i class="bi bi-arrow-right-circle"></i></button>
      <button class='btn btn-success btn-sm task-btn' onclick="moveTask(this,'doneList')"><i class="bi bi-check2-circle"></i></button>
      <button class='btn btn-danger btn-sm task-btn' onclick="removeTask(this)"><i class="bi bi-trash"></i></button>
    </div>`;
  return li;
}

function moveTask(btn, listId) {
  const li = btn.closest("li");
  document.getElementById(listId).appendChild(li);
  saveTasks();
}

function removeTask(btn) {
  btn.closest("li").remove();
  saveTasks();
}

function editTask(span) {
  const current = span.textContent;
  const input = document.createElement("input");
  input.type = "text";
  input.className = "form-control form-control-sm";
  input.value = current;
  span.replaceWith(input);
  input.focus();

  input.addEventListener("blur", () => {
    const newText = input.value.trim() || current;
    const newSpan = document.createElement("span");
    newSpan.textContent = newText;
    newSpan.ondblclick = () => editTask(newSpan);
    input.replaceWith(newSpan);
    saveTasks();
  });
}

// Guardar tareas
function saveTasks() {
  const lists = ["pendingList", "progressList", "doneList"];
  const data = {};
  lists.forEach(id => {
    data[id] = Array.from(document.getElementById(id).children).map(li => li.innerHTML);
  });
  localStorage.setItem("tasksData", JSON.stringify(data));
}

// Cargar tareas
function loadTasks() {
  const data = JSON.parse(localStorage.getItem("tasksData") || "{}");
  for (const [id, items] of Object.entries(data)) {
    const list = document.getElementById(id);
    items.forEach(html => {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = html;
      list.appendChild(li);
    });
  }
}

// ============================
// BLOC DE NOTAS (AUTOGUARDADO)
// ============================
const notesArea = document.getElementById("notesArea");
notesArea.addEventListener("input", () => {
  localStorage.setItem("myNotes", notesArea.value);
  document.getElementById("saveStatus").textContent = "Guardado ‚úÖ";
  setTimeout(() => document.getElementById("saveStatus").textContent = "Guardado autom√°ticamente", 2000);
});

// ============================
// POMODORO
// ============================
let pomodoroTime = 25 * 60;
let pomodoroTimer;
let running = false;

function updateDisplay() {
  const m = String(Math.floor(pomodoroTime / 60)).padStart(2, '0');
  const s = String(pomodoroTime % 60).padStart(2, '0');
  document.getElementById("timerDisplay").textContent = `${m}:${s}`;
  document.getElementById("progressBar").style.width = `${(pomodoroTime / (25 * 60)) * 100}%`;
}

document.getElementById("startBtn").addEventListener("click", () => {
  if (running) return;
  running = true;
  pomodoroTimer = setInterval(() => {
    if (pomodoroTime > 0) {
      pomodoroTime--;
      updateDisplay();
    } else {
      clearInterval(pomodoroTimer);
      running = false;
      alert("üçÖ ¬°Pomodoro terminado! T√≥mate un descanso.");
    }
  }, 1000);
});

document.getElementById("pauseBtn").addEventListener("click", () => {
  clearInterval(pomodoroTimer);
  running = false;
});

document.getElementById("resetBtn").addEventListener("click", () => {
  clearInterval(pomodoroTimer);
  running = false;
  pomodoroTime = 25 * 60;
  updateDisplay();
});

updateDisplay();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>



